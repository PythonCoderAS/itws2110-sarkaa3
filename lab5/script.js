var all,daily_play,found,guess,points,rank1,rank2,rank3,rank4,rank5,rank6,rank7,rank8,rank9,replaying,total,todaytotal,yesterdaytotal,win,words,todaywords,yesterdaywords,dark,foundlist=[],letters=[],todayletters=[],wordlist=[],todaywordlist=[],yesterdaywordlist=[];function darkmode(){1==dark?(document.body.classList.add("dark"),dark=0,localStorage.setItem("useDarkMode",1)):(document.body.classList.remove("dark"),dark=1,localStorage.setItem("useDarkMode",0))}function type(e,t){document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",document.getElementById("comb"+t).style.height="80px",document.getElementById("comb"+t).style.width="80px",document.getElementById("comb"+t).style.left=parseInt(document.getElementById("comb"+t).style.left)+10+"px",document.getElementById("comb"+t).style.top=parseInt(document.getElementById("comb"+t).style.top)+10+"px",document.getElementById("guess").value=document.getElementById("guess").value+e}function untype(){let e=document.getElementById("comb1"),t=document.getElementById("comb2"),n=document.getElementById("comb3"),l=document.getElementById("comb4"),s=document.getElementById("comb5"),o=document.getElementById("comb6"),y=document.getElementById("comb7");e.style.height="100px",e.style.width="100px",e.style.left="1px",e.style.top="51px",t.style.height="100px",t.style.width="100px",t.style.left="80px",t.style.top="1px",n.style.height="100px",n.style.width="100px",n.style.left="159px",n.style.top="51px",l.style.height="100px",l.style.width="100px",l.style.left="1px",l.style.top="149px",s.style.height="100px",s.style.width="100px",s.style.left="80px",s.style.top="199px",o.style.height="100px",o.style.width="100px",o.style.left="159px",o.style.top="149px",y.style.height="100px",y.style.width="100px",y.style.left="80px",y.style.top="100px"}function display(){var e=0;let t=document.getElementById("play1"),n=document.getElementById("play2"),l=document.getElementById("play3"),s=document.getElementById("play4"),o=document.getElementById("play5"),y=document.getElementById("play6"),d=document.getElementById("play7");t.src=letters[0]+".svg",t.alt=letters[0],t.style.left="21px",t.style.top="51px",t.ontouchstart=function(){e=1,type(letters[0],1)},t.onmousedown=function(){1!=e&&type(letters[0],1)},t.style.display="block",t.onmouseup=function(){untype()},t.ondragend=function(){untype()},t.ontouchend=function(){untype()},t.ontouchcancel=function(){untype()},n.src=letters[1]+".svg",n.alt=letters[1],n.style.left="100px",n.style.top="1px",n.ontouchstart=function(){e=1,type(letters[1],2)},n.onmousedown=function(){1!=e&&type(letters[1],2)},n.style.display="block",n.onmouseup=function(){untype()},n.ondragend=function(){untype()},n.ontouchend=function(){untype()},n.ontouchcancel=function(){untype()},l.src=letters[2]+".svg",l.alt=letters[2],l.style.left="179px",l.style.top="51px",l.ontouchstart=function(){e=1,type(letters[2],3)},l.onmousedown=function(){1!=e&&type(letters[2],3)},l.style.display="block",l.onmouseup=function(){untype()},l.ondragend=function(){untype()},l.ontouchend=function(){untype()},l.ontouchcancel=function(){untype()},s.src=letters[3]+".svg",s.alt=letters[3],s.style.left="21px",s.style.top="149px",s.ontouchstart=function(){e=1,type(letters[3],4)},s.onmousedown=function(){1!=e&&type(letters[3],4)},s.style.display="block",s.onmouseup=function(){untype()},s.ondragend=function(){untype()},s.ontouchend=function(){untype()},s.ontouchcancel=function(){untype()},o.src=letters[4]+".svg",o.alt=letters[4],o.style.left="100px",o.style.top="199px",o.ontouchstart=function(){e=1,type(letters[4],5)},o.onmousedown=function(){1!=e&&type(letters[4],5)},o.style.display="block",o.onmouseup=function(){untype()},o.ondragend=function(){untype()},o.ontouchend=function(){untype()},o.ontouchcancel=function(){untype()},y.src=letters[5]+".svg",y.alt=letters[5],y.style.left="179px",y.style.top="149px",y.ontouchstart=function(){e=1,type(letters[5],6)},y.onmousedown=function(){1!=e&&type(letters[5],6)},y.style.display="block",y.onmouseup=function(){untype()},y.ondragend=function(){untype()},y.ontouchend=function(){untype()},y.ontouchcancel=function(){untype()},d.src="c"+letters[6]+".svg",d.alt="center: "+letters[6],d.style.left="100px",d.style.top="100px",d.ontouchstart=function(){e=1,type(letters[6],7)},d.onmousedown=function(){1!=e&&type(letters[6],7)},d.style.display="block",d.onmouseup=function(){untype()},d.ondragend=function(){untype()},d.ontouchend=function(){untype()},d.ontouchcancel=function(){untype()}}function update_rank(){var e;points>=rank9?(0==win&&(alert("You earned the rank of Queen Bee!\n\nCan you find all the words?"),win=1),e="Queen Bee!"):e=points>=rank8?"Outstanding":points>=rank7?"Marvellous":points>=rank6?"Superb":points>=rank5?"Excellent":points>=rank4?"Skilled":points>=rank3?"Fine":points>=rank2?"Novice":"Newbie",document.getElementById("rank-update").innerHTML=e}function set_rank(){rank1=0,rank2=Math.floor(.02*total),rank3=Math.floor(.05*total),rank4=Math.floor(.08*total),rank5=Math.floor(.15*total),rank6=Math.floor(.25*total),rank7=Math.floor(.4*total),rank8=Math.floor(.5*total),rank9=Math.floor(.7*total)}function save_word(){localStorage.setItem("foundwords",JSON.stringify(foundlist))}function add_points(){var e=0,t=0,n=0,l=0,s=0,o=0,y=0,d=0;if(1===daily_play&&save_word(),(y=guess.length)<7){4==y&&(y=1),points+=y;return}for(y=0;y<guess.length;){for(d=0;d<7;d++)guess[y]==letters[d]&&(0==d&&(e=1),1==d&&(t=1),2==d&&(n=1),3==d&&(l=1),4==d&&(s=1),5==d&&(o=1));y+=1}if(1==e&&1==t&&1==n&&1==l&&1==s&&1==o){points=points+guess.length+7,document.getElementById("no-message").style.display="none",document.getElementById("pangram").style.display="inline";return}points+=guess.length}function found_word(){var e;for(e=0;e<found;e++)if(guess==foundlist[e])return document.getElementById("no-message").style.display="none",document.getElementById("already-found").style.display="inline",1;return foundlist.push(guess),found+=1,add_points(),document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),update_rank(),found==words&&(alert("Congratulations! You found all the words!"),all=1),0}function check(){var e,t=0;for(document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",0===replaying?(guess=document.getElementById("guess").value.toLowerCase(),document.getElementById("player-guess").reset()):guess=guess.toLowerCase(),e=0;e<guess.length;e++)"7"+guess[e]==letters[6]&&(t=1);if(guess.length<4)return document.getElementById("no-message").style.display="none",document.getElementById("too-short").style.display="inline",1;if(0==t)return document.getElementById("no-message").style.display="none",document.getElementById("center-letter").style.display="inline",1;for(e=0;e<words;e++)if(guess==wordlist[e])return found_word();return document.getElementById("no-message").style.display="none",document.getElementById("not-in-list").style.display="inline",1}function replay_words(){var e,t;for(replaying=1,t=JSON.parse(localStorage.getItem("foundwords")),localStorage.removeItem("foundwords"),e=0;e<t.length;e++)if(guess=t[e],1==check()){for(localStorage.removeItem("foundwords"),e=0;e<found;e++)foundlist.pop();all=0,found=0,points=0,rank="Newbie",win=0,document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",replaying=0;return}document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",replaying=0}function daily(){var e;for(e=0,daily_play=1;e<found;e++)foundlist.pop();all=0,found=0,points=0,rank="Newbie",replaying=0,win=0,document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),document.getElementById("rank-update").innerHTML=rank,document.getElementById("yesterday-or-random").innerHTML="Yesterday's answers",document.getElementById("random-answers").style.display="none",document.getElementById("restart-daily-button").style.visibility="hidden",document.getElementById("update-random").innerHTML="",document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",document.getElementById("play1").style.display="none",document.getElementById("play2").style.display="none",document.getElementById("play3").style.display="none",document.getElementById("play4").style.display="none",document.getElementById("play5").style.display="none",document.getElementById("play6").style.display="none",document.getElementById("play7").style.display="none",letters[0]=todayletters[0],letters[1]=todayletters[1],letters[2]=todayletters[2],letters[3]=todayletters[3],letters[4]=todayletters[4],letters[5]=todayletters[5],letters[6]=todayletters[6],words=todaywords,total=todaytotal,wordlist=todaywordlist,set_rank(),!0===localStorage.hasOwnProperty("foundwords")&&replay_words(),document.getElementById("update-random").innerHTML=yesterdaywordlist.join("<br />")+"<br /><br />Total words:  "+yesterdaywords+"<br />Total points: "+yesterdaytotal+"<br />Points for Queen Bee: "+Math.floor(.7*yesterdaytotal),display()}function get_yesterday(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);yesterdaywords=e.words,yesterdaytotal=e.total,yesterdaywordlist=e.wordlist}},e.open("GET","https://freebee.fun/cgi-bin/yesterday",!0),e.send()}function get_today(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);todayletters[0]=e.letters[0],todayletters[1]=e.letters[1],todayletters[2]=e.letters[2],todayletters[3]=e.letters[3],todayletters[4]=e.letters[4],todayletters[5]=e.letters[5],todayletters[6]=e.center,todaywords=e.words,todaytotal=e.total,todaywordlist=e.wordlist,daily()}},e.open("GET","https://freebee.fun/cgi-bin/today",!0),e.send()}function shuffle(){var e,t,n;for(e=5;e>0;e--)n=letters[t=Math.floor(Math.random()*(e+1))],letters[t]=letters[e],letters[e]=n;display()}function random(){var e,t=new XMLHttpRequest;for(e=0,daily_play=0;e<found;e++)foundlist.pop();all=0,found=0,points=0,rank="Newbie",win=0,document.getElementById("points-update").innerHTML=points,document.getElementById("answers-update").innerHTML=foundlist.join("<br />"),document.getElementById("rank-update").innerHTML=rank,document.getElementById("yesterday-or-random").innerHTML="Answers",document.getElementById("update-random").innerHTML="",document.getElementById("no-message").style.display="inline",document.getElementById("pangram").style.display="none",document.getElementById("already-found").style.display="none",document.getElementById("center-letter").style.display="none",document.getElementById("too-short").style.display="none",document.getElementById("not-in-list").style.display="none",document.getElementById("play1").style.display="none",document.getElementById("play2").style.display="none",document.getElementById("play3").style.display="none",document.getElementById("play4").style.display="none",document.getElementById("play5").style.display="none",document.getElementById("play6").style.display="none",document.getElementById("play7").style.display="none",t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);letters[0]=e.letters[0],letters[1]=e.letters[1],letters[2]=e.letters[2],letters[3]=e.letters[3],letters[4]=e.letters[4],letters[5]=e.letters[5],letters[6]=e.center,words=e.words,total=e.total,wordlist=e.wordlist,set_rank(),display(),document.getElementById("random-answers").style.display="block",document.getElementById("restart-daily-button").style.visibility="visible"}},t.open("GET","../../cgi-bin/random",!0),t.send()}function show_random(){document.getElementById("update-random").innerHTML=wordlist.join("<br />")+"<br /><br />Total words:  "+words+"<br />Total points: "+total+"<br />Points for Queen Bee: "+Math.floor(.7*total)}function delete_letter(){var e=document.getElementById("guess").value,t=e.length;e=e.slice(0,t-1)+e.slice(t,t),document.getElementById("guess").value=e}window.onload=function(){get_yesterday(),get_today(),dark=!0===localStorage.hasOwnProperty("useDarkMode")?Number(localStorage.getItem("useDarkMode")):1,darkmode()};